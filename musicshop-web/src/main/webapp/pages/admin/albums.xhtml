<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
	<h:head>
		<title>Inicio de Sesión</title>
		<ui:include src="/pages/commons/scripts.xhtml"></ui:include>
		<h:outputStylesheet library="css" name="styles.css"></h:outputStylesheet>
<!-- 		<h:outputStylesheet library="css" name="primeflex.min.css"></h:outputStylesheet> -->
	</h:head>
	<h:body>
	 	<div class="ui-fluid">
	 		<h:form id="frmalbums">
	 			<p:growl id="messages" showDetail="true" showSummary="true" skipDetailIfEqualsSummary="true"/>
	 			<ui:include src="/pages/commons/navbar.xhtml"></ui:include>
	 			<div class="p-grid sample-layout">
	 				<ui:include src="/pages/commons/header.xhtml"></ui:include>
	 				<div class="p-col-12 p-md-10 p-col-nogutter" style="background-color: #191919">
	 					<div class="p-grid" style="width: 120%">
	 						<div class="p-col-10" style="margin: 0px 0px">
	 							<p:commandButton oncomplete="PF('dlg2').show()" update="frmPnl:pnlAlbum"  action="#{albumController.cleanComponents()}" value="Agregar"></p:commandButton>
	 							<p:dataTable id="tblAlbums" rows="20"  paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    			currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                     			rowsPerPageTemplate="5,10,{ShowAll|'All'}" value="#{albumController.albums}" var="album" filteredValue="#{albumController.albumFilter}">
	 								<p:column headerText="Imagen">
	 									<p:graphicImage name="images/albums/#{album.image}" width="100%"></p:graphicImage>
	 								</p:column>
	 								<p:column headerText="Nombre" filterBy="#{album.name}" filterMatchMode="contains">
	 									<p:outputLabel value="#{album.name}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Artista" filterBy="#{album.artist.name}" filterMatchMode="contains">
	 									<p:outputLabel value="#{album.artist.name}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Año" filterBy="#{album.year}" filterMatchMode="contains">
	 									<p:outputLabel value="#{album.year}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Formato" filterBy="#{album.format}" filterMatchMode="contains">
	 									<p:outputLabel value="#{album.format}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Precio" filterBy="#{album.value}" filterMatchMode="contains">
	 									<p:outputLabel value="#{album.value}">
	 										<f:convertNumber type="currency" currencySymbol="$"></f:convertNumber>
	 									</p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Disquera">
	 									<p:outputLabel value="#{album.floppyDisk.description}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Status" filterBy="#{album.status}" filterMatchMode="contains">
	 									<p:outputLabel value="Habilitado" rendered="#{album.status}"></p:outputLabel>
	 									<p:outputLabel value="Inhabilitado" rendered="#{!album.status}"></p:outputLabel>
	 								</p:column>	
	 								<p:column headerText="Actualizar">
	 									<p:commandButton value="Actualizar" update="frmPnl:pnlAlbum" immediate="true" action="#{albumController.getAlbumJSF(album)}" oncomplete="PF('dlg2').show()"></p:commandButton>
	 								</p:column>
	 							</p:dataTable>
	 						</div>
	 					</div>
	 				</div>
	 				<ui:include src="/pages/commons/footer.xhtml"></ui:include>
	 			</div>
	 		</h:form>
	 		<h:form id="frmPnl">
	 			<p:dialog header="Agregar Album" widgetVar="dlg2" resizable="false" responsive="true" showEffect="fade" width="50%" modal="true" height="500">
	 				<p:panelGrid id="pnlAlbum" columns="1" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-g-12">
	 					<p:outputLabel for="txtName" value="Nombre: "></p:outputLabel>
	 					<p:inputText id="txtName" value="#{albumController.album.name}" required="true" requiredMessage="El nombre del album es requerido"></p:inputText>
	 					<p:outputLabel for="txtDescription" value="Descripción: "></p:outputLabel>
	 					<p:inputText id="txtDescription" value="#{albumController.album.description}" required="true" requiredMessage="La descripción del album es requerido"></p:inputText>
	 					<p:outputLabel value="Imagen: "></p:outputLabel>
	 					<p:fileUpload mode="advanced" multiple="false" label="Buscar" sizeLimit="10002400" dragDropSupport="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" invalidSizeMessage="Maximum file size allowed is 100 KB"  invalidFileMessage="only gif | jpg | jpeg | png is allowed" update="frmalbums:messages" listener="#{albumController.handleFileUpload}"/>
	 					<p:outputLabel for="txtYear" value="Año: "></p:outputLabel>
	 					<p:inputText id="txtYear" value="#{albumController.album.year}" required="true" requiredMessage="El año del album es requerido"></p:inputText>
	 					<p:outputLabel for="txtFormat" value="Formato: "></p:outputLabel>
	 					<p:inputText id="txtFormat" value="#{albumController.album.format}" required="true" requiredMessage="El formato del album es requerido"></p:inputText>
	 					<p:outputLabel for="txtPrice" value="Precio: "></p:outputLabel>
	 					<p:inputText id="txtPrice" value="#{albumController.album.value}" required="true" requiredMessage="El precio del album es requerido">
	 						<f:convertNumber currencySymbol="$" type="currency"></f:convertNumber>
	 					</p:inputText>
	 					<p:outputLabel for="cmboFloppyDisk" value="Disquera "></p:outputLabel>
	 					<p:selectOneMenu value="#{albumController.album.floppyDisk.idFloppyDisk}" id="cmboFloppyDisk">
	 						<f:selectItem noSelectionOption="true" itemLabel="Seleccione"></f:selectItem>
	 						<f:selectItems var="floppyDisk" value="#{albumController.floppyDisks}" itemValue="#{floppyDisk.idFloppyDisk}" itemLabel="#{floppyDisk.description}"></f:selectItems>
	 					</p:selectOneMenu>
	 					<p:outputLabel for="cmboArtist" value="Artista: "></p:outputLabel>
	 					<p:selectOneMenu value="#{albumController.album.artist.idArtist}" id="cmboArtist">
	 						<f:selectItem itemValue="" itemLabel="Seleccione"></f:selectItem>
	 						<f:selectItems var="artist" value="#{albumController.artists}" itemLabel="#{artist.name}" itemValue="#{artist.idArtist}"></f:selectItems>
	 					</p:selectOneMenu>
	 					<p:outputLabel rendered="#{albumController.album.idAlbum != null}" value="Estatus: "></p:outputLabel>
	 					<p:inputSwitch rendered="#{albumController.album.idAlbum != null}" value="#{albumController.album.status}"></p:inputSwitch>
	 					<p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-g-6, ui-g-6">
	 						<p:commandButton value="Actualizar" update="frmalbums:messages, pnlAlbum, frmalbums:tblAlbums" rendered="#{albumController.album != null}" action="#{albumController.update}"></p:commandButton>
	 						<p:commandButton value="Guardar" update="frmalbums:messages, pnlAlbum, frmalbums:tblAlbums" rendered="#{albumController.album == null}" action="#{albumController.save}"></p:commandButton>
	 						<p:commandButton value="Cancelar" onclick="PF('dlg2').hide()" update="pnlAlbum" styleClass="ui-button-outlined ui-button-danger" action="#{albumController.cleanComponents}"></p:commandButton>
	 					</p:panelGrid>
	 				</p:panelGrid>
				</p:dialog>
	 		</h:form>
	 	</div>
	 	<style>
			body .ui-scrollpanel {
				border: none;
			    background: #323232;
			    color: #dedede;
			    padding: 0.571rem 1rem;
			}
		</style>
	</h:body>
</html>