<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"      
      xmlns:h="http://java.sun.com/jsf/html"
	  xmlns:p="http://primefaces.org/ui"
	  xmlns:ui="http://java.sun.com/jsf/facelets"
	  xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
	<h:head>
		<title>Inicio de Sesión</title>
		<ui:include src="/pages/commons/scripts.xhtml"></ui:include>
		<h:outputStylesheet library="css" name="styles.css"></h:outputStylesheet>
<!-- 		<h:outputStylesheet library="css" name="primeflex.min.css"></h:outputStylesheet> -->
	</h:head>
	<h:body>
	 	<div class="ui-fluid">
	 		<h:form id="frmartists">
	 			<ui:include src="/pages/commons/loading.xhtml"></ui:include>
	 			<p:growl id="messages" showDetail="true" showSummary="true" skipDetailIfEqualsSummary="true"/>
	 			<ui:include src="/pages/commons/navbar.xhtml"></ui:include>
	 			<div class="p-grid sample-layout">
	 				<ui:include src="/pages/commons/header.xhtml"></ui:include>
	 				<div class="p-col-12 p-md-10 p-col-nogutter" style="background-color: #191919">
	 					<div class="p-grid" style="width: 120%">
	 						<div class="p-col-10" style="margin: 0px 0px">
	 							<p:commandButton oncomplete="PF('dlg2').show()" update="frmPnl:pnlArtist"  action="#{artistController.cleanComponents()}" value="Agregar"></p:commandButton>
	 							<p:dataTable id="tblArtist" rows="20"  paginator="true" paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                    			currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                     			rowsPerPageTemplate="5,10,{ShowAll|'All'}" value="#{artistController.artists}" var="artist" filteredValue="#{artistController.artistFilter}">
	 								<p:column headerText="Imagen">
	 									<p:graphicImage name="images/artistas/#{artist.image}" width="100%"></p:graphicImage>
	 								</p:column>
	 								<p:column headerText="Nombre" filterBy="#{artist.name}" filterMatchMode="contains">
	 									<p:outputLabel value="#{artist.name}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Género" filterBy="#{artist.year}" filterMatchMode="contains">
	 									<p:outputLabel value="#{artist.subGender.gender.description}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="SubGénero" filterBy="#{artist.artist.name}" filterMatchMode="contains">
	 									<p:outputLabel value="#{artist.subGender.description}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Nacionalidad">
	 									<p:outputLabel value="#{artist.nacionality.description}"></p:outputLabel>
	 								</p:column>
	 								<p:column headerText="Status" filterBy="#{artist.status}" filterMatchMode="contains">
	 									<p:outputLabel value="Habilitado" rendered="#{artist.status}"></p:outputLabel>
	 									<p:outputLabel value="Inhabilitado" rendered="#{!artist.status}"></p:outputLabel>
	 								</p:column>	
	 								<p:column headerText="Actualizar">
	 									<p:commandButton value="Actualizar" update="frmPnl:pnlArtist" immediate="true" action="#{artistController.getArtistJSF(artist)}" oncomplete="PF('dlg2').show()"></p:commandButton>
	 								</p:column>
	 							</p:dataTable>
	 						</div>
	 					</div>
	 				</div>
	 				<ui:include src="/pages/commons/footer.xhtml"></ui:include>
	 			</div>
	 		</h:form>
	 		<h:form id="frmPnl">
	 			<p:dialog header="Agregar artist" widgetVar="dlg2" resizable="false" responsive="true" showEffect="fade" width="50%" modal="true" height="500">
	 				<p:panelGrid id="pnlArtist" columns="1" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-g-12">
	 					<p:outputLabel for="txtName" value="Nombre: "></p:outputLabel>
	 					<p:inputText id="txtName" value="#{artistController.artist.name}" required="true" requiredMessage="El nombre del artist es requerido"></p:inputText>
	 					<p:outputLabel value="Imagen: "></p:outputLabel>
	 					<p:fileUpload mode="advanced" multiple="false" label="Buscar" sizeLimit="10002400" dragDropSupport="true" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" invalidSizeMessage="Maximum file size allowed is 100 KB"  invalidFileMessage="only gif | jpg | jpeg | png is allowed" update="frmartists:messages" listener="#{artistController.handleFileUpload}"/>
	 					<p:outputLabel for="cmboNacionality" value="Nacionalidad "></p:outputLabel>
	 					<p:selectOneMenu value="#{artistController.artist.nacionality.idNacionality}" id="cmboNacionality">
	 						<f:selectItem noSelectionOption="true" itemLabel="Seleccione"></f:selectItem>
	 						<f:selectItems var="nacionality" value="#{artistController.nacionalities}" itemValue="#{nacionality.idNacionality}" itemLabel="#{nacionality.description}"></f:selectItems>
	 					</p:selectOneMenu>
	 					<p:outputLabel for="cmboArtist" value="SubGénero: "></p:outputLabel>
	 					<p:selectOneMenu value="#{artistController.artist.subGender.idSubGender}" id="cmboArtist">
	 						<f:selectItem itemValue="" itemLabel="Seleccione"></f:selectItem>
	 						<f:selectItems var="subGender" value="#{artistController.gendersGroup}" itemValue="#{subGender.idSubGender}"></f:selectItems>
	 					</p:selectOneMenu>
	 					<p:outputLabel rendered="#{artistController.artist.idArtist != null}" value="Estatus: "></p:outputLabel>
	 					<p:inputSwitch rendered="#{artistController.artist.idArtist != null}" value="#{artistController.artist.status}"></p:inputSwitch>
	 					<p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank" columnClasses="ui-g-6, ui-g-6">
	 						<p:commandButton value="Actualizar" update="frmartists:messages, pnlArtist, frmartists:tblArtist" rendered="#{artistController.artist.idArtist != null}" action="#{artistController.update}"></p:commandButton>
	 						<p:commandButton value="Guardar" update="frmartists:messages, pnlArtist, frmartists:tblArtist" rendered="#{artistController.artist.idArtist == null}" action="#{artistController.save}"></p:commandButton>
	 						<p:commandButton value="Cancelar" onclick="PF('dlg2').hide()" update="pnlArtist" styleClass="ui-button-outlined ui-button-danger" action="#{artistController.cleanComponents}"></p:commandButton>
	 					</p:panelGrid>
	 				</p:panelGrid>
				</p:dialog>
	 		</h:form>
	 	</div>
	 	<style>
			body .ui-scrollpanel {
				border: none;
			    background: #323232;
			    color: #dedede;
			    padding: 0.571rem 1rem;
			}
		</style>
	</h:body>
</html>